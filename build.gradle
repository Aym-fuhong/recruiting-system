subprojects {
    apply plugin: 'java'

    repositories {
        jcenter()
    }
}

allprojects {

    apply plugin: "idea"
}

task(startServer) {
    doFirst {
        println "Starting jetty"
        project(':api').jettyRun.daemon = true
        project(':api').jettyRun.execute()
        println "Jetty started"

        project(':app').mongoRefresh.execute()
        project(':app').startNodemon.execute()
    }

    doLast {
        project(':api').jettyStop.execute()
        println "Server stoped"
    }
}

startServer.dependsOn ':api:DBRecovery'